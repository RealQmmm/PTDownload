services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: pt-app
    ports:
      - "32781:3000"

    volumes:
      # 【必需】内置数据和配置目录
      - ./data:/data
      # 【可选】外部数据库挂载（推荐）
      # 为了平滑迁移或备份，建议将数据库映射到外部。
      # 注意：容器内路径必须固定为 /external_db，系统会自动识别。
      # 格式: [你的宿主机目录]:/external_db
      # - /your/host/path/pt_db:/external_db
      #- VOLUME_MAPPING="-v /Container/PTDownload:/external_db"
      # 示例 (群晖/NAS 用户常用):
      # - /volume1/docker/ptdownload/db:/external_db

    environment:
      - PORT=3000
      - TZ=Asia/Shanghai
    restart: unless-stopped
