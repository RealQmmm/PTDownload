# Docker Compose 配置示例 - 使用外部数据库
#
# 此配置文件演示如何使用外部挂载的数据库
#
# 使用方法：
# 1. 将此文件复制为 docker-compose.yml
# 2. 修改下面的 /share/Container/PTdownload 为你的实际路径
# 3. 运行 docker-compose up -d
#
# 系统会自动检测：
# - 如果 /external_db 目录存在 → 使用外部数据库
# - 如果 /external_db 目录不存在 → 使用内置数据库

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: pt-app
    ports:
      - "3000:3000"
    volumes:
      # 内置数据目录（必需）
      - ./data:/data

      # 外部数据库挂载
      # 修改下面的路径为你的实际路径
      - /share/Container/PTdownload:/external_db

    environment:
      - PORT=3000
      - TZ=Asia/Shanghai
    restart: unless-stopped
