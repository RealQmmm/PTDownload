@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    html {
        -webkit-tap-highlight-color: transparent;
        scroll-behavior: smooth;
        height: 100%;
        width: 100%;
    }


    /* Safe Area Support for PWA */
    :root {
        --safe-area-inset-top: env(safe-area-inset-top);
        --safe-area-inset-right: env(safe-area-inset-right);
        --safe-area-inset-bottom: env(safe-area-inset-bottom);
        --safe-area-inset-left: env(safe-area-inset-left);
    }

    body {
        @apply antialiased text-gray-900 dark:text-gray-100 bg-surface-100 dark:bg-surface-950 transition-colors duration-300;
        min-height: 100%;
        width: 100%;
        /* Allow pull-to-refresh and other native gestures */
        overscroll-behavior-y: auto;


        /* Safe Area Variables */
        --sat: env(safe-area-inset-top);
        --sar: env(safe-area-inset-right);
        --sab: env(safe-area-inset-bottom);
        --sal: env(safe-area-inset-left);
    }

    /* Custom Scrollbar for Webkit */
    ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    ::-webkit-scrollbar-track {
        @apply bg-transparent;
    }

    ::-webkit-scrollbar-thumb {
        @apply bg-gray-300 dark:bg-gray-700 rounded-full hover:bg-gray-400 dark:hover:bg-gray-600 transition-colors;
    }

    /* iOS PWA Interaction Fixes */
    @supports (-webkit-touch-callout: none) {

        input,
        select,
        textarea {
            font-size: 16px !important;
            /* Prevent auto-zoom on focus */
            -webkit-user-select: auto !important;
            user-select: auto !important;
        }

        /* Force native picker to trigger reliably */
        select,
        input[type="time"],
        input[type="date"] {
            cursor: pointer;
            min-height: 44px;
            /* Apple's recommended minimum tap target */
        }
    }
}

@layer components {

    /* Glassmorphism Utilities */
    .glass {
        @apply bg-white/70 backdrop-blur-md border border-white/20 shadow-glass;
    }

    .glass-dark {
        @apply bg-gray-900/70 backdrop-blur-md border border-white/10 shadow-glass;
    }

    /* Adaptive Card */
    .card-base {
        @apply bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700/50 shadow-soft dark:shadow-none transition-all duration-300;
    }

    .card-hover {
        @apply hover:shadow-lg hover:-translate-y-0.5 hover:border-primary-200 dark:hover:border-primary-900/50;
    }

    /* Safe Area Utilities */
    .pb-safe {
        padding-bottom: env(safe-area-inset-bottom);
    }

    .pt-safe {
        padding-top: env(safe-area-inset-top);
    }

    .mt-safe {
        margin-top: env(safe-area-inset-top);
    }

    .mb-safe {
        margin-bottom: env(safe-area-inset-bottom);
    }

    /* Global Scrollbar Styling */
    * {
        scrollbar-width: thin;
        scrollbar-color: rgba(156, 163, 175, 0.3) transparent;
    }

    ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    ::-webkit-scrollbar-track {
        background: transparent;
    }

    ::-webkit-scrollbar-thumb {
        background: rgba(156, 163, 175, 0.3);
        border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: rgba(156, 163, 175, 0.5);
    }

    .dark ::-webkit-scrollbar-thumb {
        background: rgba(75, 85, 99, 0.4);
    }

    .dark ::-webkit-scrollbar-thumb:hover {
        background: rgba(75, 85, 99, 0.6);
    }
}