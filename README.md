# PT Download Manager (PTä¸‹è½½ç®¡ç†åŠ©æ‰‹)

è¿™æ˜¯ä¸€ä¸ªç°ä»£åŒ–ã€è½»é‡çº§ä¸”å¼ºå¤§çš„ PT (Private Tracker) èµ„æºèšåˆç®¡ç†å·¥å…·ã€‚å®ƒé€šè¿‡ç»Ÿä¸€çš„ç•Œé¢ä¸ºæ‚¨æä¾›å¤šç«™ç‚¹çš„èµ„æºæœç´¢ã€RSS è®¢é˜…ã€è‡ªåŠ¨åŒ–ä¸‹è½½ä»¥åŠå®æ—¶æµé‡ç»Ÿè®¡ï¼Œæ—¨åœ¨æˆä¸ºæ‚¨çš„ç§äºº PT ç®¡å®¶ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

*   **ğŸ“Š ç»¼åˆä»ªè¡¨ç›˜**: 
    - **å®æ—¶ç›‘æ§**ï¼šç›´è§‚å±•ç¤ºä¸‹è½½/ä¸Šä¼ é€Ÿåº¦ã€æ´»åŠ¨ä»»åŠ¡è¿›åº¦ã€‚
    - **æµé‡ç»Ÿè®¡**ï¼šåŸºäºå·®å€¼è®¡ç®—çš„ç²¾å‡†ä»Šæ—¥æµé‡ç»Ÿè®¡ï¼Œæ”¯æŒæœ€è¿‘ 7 å¤©æµé‡è¶‹åŠ¿å›¾ã€‚
    - **æ™ºèƒ½åŒæ­¥**ï¼šé‡‡ç”¨æœåŠ¡ç«¯ç¼“å­˜ä¸æ¥å£èšåˆæŠ€æœ¯ï¼Œå®ç°æ¯«ç§’çº§çš„æ•°æ®å“åº”ä½“éªŒã€‚
*   **ğŸ” æ™ºèƒ½èšåˆæœç´¢**:
    - **å…¨ç«™æœç´¢**ï¼šä¸€é”®æ¨ªè·¨å¤šä¸ª PT ç«™ç‚¹æœç´¢æ’ç‰ˆä¼˜ç¾çš„èµ„æºåˆ—è¡¨ã€‚
    - **è¿‘æœŸèµ„æºå‘ç°**ï¼šç‰¹æœ‰çš„"è¿‘æœŸèµ„æº"æ¨¡å¼ï¼Œæ— éœ€å…³é”®è¯å³å¯å‘ç°å…¨ç«™æœ€æ–°å‘å¸ƒçš„ç§å­ã€‚
    - **ç²¾å‡†æ—¥æœŸè§£æ**ï¼šå†…ç½®æ™ºèƒ½è§£æå™¨ï¼Œæ”¯æŒç»å¯¹æ—¥æœŸã€ç›¸å¯¹æ—¥æœŸï¼ˆå¦‚ï¼š2 å°æ—¶å‰ï¼‰ä»¥åŠå¤æ‚çš„"å­˜æ´»æ—¶é—´"è®¡ç®—ã€‚
*   **ğŸ“¡ è‡ªåŠ¨åŒ– RSS è®¢é˜…**:
    - **çµæ´»è®¢é˜…**ï¼šç®¡ç†å¤šä¸ª RSS æºï¼Œæ”¯æŒè‡ªå®šä¹‰æ‰§è¡Œå‘¨æœŸï¼ˆCronï¼‰ã€‚
    - **ç²¾ç»†åŒ–è¿‡æ»¤å™¨**ï¼šæ”¯æŒå…³é”®è¯åŒ…å«/æ’é™¤ã€æ–‡ä»¶å¤§å°èŒƒå›´é™åˆ¶ã€‚
    - **è‡ªåŠ¨åŒ–æµæ°´çº¿**ï¼šåŒ¹é…æˆåŠŸçš„èµ„æºå°†è‡ªåŠ¨æ¨é€åˆ°ä¸‹è½½å®¢æˆ·ç«¯å¹¶å‘é€é€šçŸ¥ã€‚
*   **âš™ï¸ å®¢æˆ·ç«¯ä¸ç«™ç‚¹ç®¡ç†**:
    - **å¤šå®¢æˆ·ç«¯æ”¯æŒ**ï¼šæ·±åº¦é›†æˆ qBittorrent å’Œ Transmissionã€‚
    - **ç«™ç‚¹é€‚é…**ï¼šå®Œç¾é€‚é… NexusPHP æ¶æ„ç«™ç‚¹ï¼Œæ”¯æŒ Cookie è®¤è¯ã€‚
*   **ğŸ”” æ¶ˆæ¯é€šçŸ¥**:
    - æ”¯æŒ **Bark** å’Œ **è‡ªå®šä¹‰ Webhook**ï¼Œè®©æ‚¨éšæ—¶éšåœ°æŒæ¡ä¸‹è½½åŠ¨æ€ã€‚
*   **ğŸŒ“ æè‡´è§†è§‰ä½“éªŒ**:
    - **ç°ä»£åŒ– UI**ï¼šæé€Ÿã€æµç•…çš„å“åº”å¼ç•Œé¢ï¼Œæ”¯æŒæµ…è‰²ã€æ·±è‰²åŠç³»ç»Ÿè·Ÿéšæ¨¡å¼ã€‚
    - **ç§»åŠ¨ç«¯é€‚é…**ï¼šé’ˆå¯¹æ‰‹æœºç«¯è¿›è¡Œäº†ä¸“é—¨çš„æ’ç‰ˆä¼˜åŒ–ã€‚

## ğŸ” åŠŸèƒ½æœºåˆ¶è¯¦è§£

### 1. å…¨åœºæ™¯æµé‡ç›‘æ§
ç³»ç»Ÿæ ¸å¿ƒå®ç°äº†å¯¹æµé‡å’Œç§å­çš„å…¨æ–¹ä½è¦†ç›–ç›‘æ§ï¼š
*   **å…¨å±€æµé‡**: å®æ—¶é‡‡é›†ä¸‹è½½å™¨ï¼ˆqBittorrent/Transmissionï¼‰çš„å…¨å±€ä¼ è¾“æ•°æ®ï¼Œç»“åˆæœ¬åœ°å¢é‡è®¡ç®—é€»è¾‘ï¼Œç²¾ç¡®ç»Ÿè®¡ä»Šæ—¥æµé‡ï¼Œä¸å—ä¸‹è½½å™¨é‡å¯æˆ–è®¡æ•°å™¨é‡ç½®å½±å“ã€‚
*   **ç§å­è¦†ç›–**: 
    - **å¹³å°æ·»åŠ **: æ— è®ºæ˜¯é€šè¿‡ RSS è‡ªåŠ¨è®¢é˜…è¿˜æ˜¯æ‰‹åŠ¨æœç´¢ä¸‹è½½çš„ç§å­ï¼Œéƒ½ä¼šå®æ—¶è®°å½•ã€‚
    - **å¤–éƒ¨æ·»åŠ **: æ”¯æŒè‡ªåŠ¨å‘ç°ç”¨æˆ·ç›´æ¥åœ¨ä¸‹è½½å™¨ä¸­æ·»åŠ çš„ç§å­ï¼Œå¹¶è‡ªåŠ¨å¯¼å…¥ç³»ç»Ÿçš„å†å²è®°å½•ä¸­ï¼Œç¡®ä¿"ä»Šæ—¥ä¸‹è½½"æ•°æ®æ— é—æ¼ã€‚
    - **å®Œæˆæ£€æµ‹**: ç»Ÿä¸€è½®è¯¢æ‰€æœ‰ä»»åŠ¡çŠ¶æ€ï¼Œå‡†ç¡®è®°å½•å®Œæˆæ—¶é—´ã€‚
*   **ç«™ç‚¹çƒ­åŠ›å›¾**: åŸºäºç«™ç‚¹ Cookie æŠ“å–ä¸ªäººä¸­å¿ƒæ•°æ®ï¼Œæ¶µç›–äº†æ‰€æœ‰ä¸Šä¼ è´¡çŒ®ï¼ˆåŒ…å«è¾…ç§åŠéæœ¬ç³»ç»Ÿæ·»åŠ çš„ç§å­ï¼‰ã€‚

### 2. æ•°æ®å¤‡ä»½ä¸æ¢å¤
ä¸ºäº†ä¿éšœæ•°æ®å®‰å…¨ï¼Œç³»ç»Ÿæä¾›äº†å®Œå–„çš„å¤‡ä»½æœºåˆ¶ï¼ˆä½äº`è®¾ç½® -> ç³»ç»Ÿè®¾ç½® -> å¤‡ä»½ä¸æ¢å¤`ï¼‰ï¼š
*   **å¤‡ä»½èŒƒå›´**: æ¶µç›–æ‰€æœ‰æŒä¹…åŒ–æ•°æ®ï¼ŒåŒ…æ‹¬ç«™ç‚¹é…ç½®ã€ä»»åŠ¡è§„åˆ™ã€å†å²è®°å½•ã€æµé‡ç»Ÿè®¡ã€çƒ­åŠ›å›¾æ•°æ®åŠç”¨æˆ·è®¾ç½®ç­‰å…± 11 å¼ æ ¸å¿ƒæ•°æ®è¡¨ã€‚
*   **æ™ºèƒ½å¯¼å…¥**:
    - **ç‰ˆæœ¬å…¼å®¹**: å¯¼å…¥é€»è¾‘å…·å¤‡å­—æ®µè‡ªåŠ¨åŒ¹é…åŠŸèƒ½ï¼Œèƒ½æ™ºèƒ½å¤„ç†å› ç‰ˆæœ¬æ›´è¿­å¯¼è‡´çš„å­—æ®µå·®å¼‚ï¼Œé˜²æ­¢æŠ¥é”™ã€‚
    - **æ•°æ®å®Œæ•´**: å¯¼å…¥æ—¶ä¼šè‡ªåŠ¨å¤„ç†æ•°æ®ä¾èµ–ï¼ˆå¦‚ä»»åŠ¡ä¸ç«™ç‚¹çš„å…³è”ï¼‰ï¼Œç¡®ä¿å­˜å‚¨çš„ä¸€è‡´æ€§ã€‚
    - **æ— ç¼è¡”æ¥**: å¯¼å…¥åç³»ç»Ÿä¼šè‡ªåŠ¨é‡è½½ç»Ÿè®¡æœåŠ¡ï¼Œç¡®ä¿æµé‡è®¡æ•°è¿ç»­ä¸æ–­å±‚ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯ (Client)
*   **React 18** + **Vite** (æ„å»ºé€Ÿåº¦æå¿«)
*   **Vanilla CSS** (ç²¾é›•ç»†ç¢çš„ç°ä»£ç¾å­¦è®¾è®¡)
*   **Lucide React** (é«˜è´¨å›¾æ ‡åº“)

### åç«¯ (Server)
*   **Node.js** + **Express**
*   **SQLite (Better-SQLite3)** (è½»é‡é«˜æ€§èƒ½)
*   **Cheerio** (å¼ºå¤§çš„ HTML è§£æèƒ½åŠ›)
*   **Node-Schedule** (ç²¾å‡†ä»»åŠ¡å®šæ—¶)

### éƒ¨ç½²ä¸æ€§èƒ½
*   **Docker & Docker Compose** (ä¸€é”®å¼å¤šé˜¶æ®µæ„å»º)
*   **æ™ºèƒ½ç¼“å­˜å±‚**ï¼šå‡å°‘ä¸‹è½½å™¨ API è´Ÿæ‹…ï¼Œæå‡é¡µé¢åŠ è½½é€Ÿåº¦ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹ (ä½¿ç”¨ Docker)

### å‰ç½®è¦æ±‚
*   å®‰è£… [Docker](https://www.docker.com/) å’Œ [Docker Compose](https://docs.docker.com/compose/)ã€‚

### éƒ¨ç½²æ­¥éª¤

1.  **å‡†å¤‡ç¯å¢ƒ**
    ```bash
    mkdir -p PTDownload/data
    cd PTDownload
    ```

2.  **åˆ›å»º docker-compose.yml**
    ```yaml
    version: '3.8'
    services:
      pt-manager:
        image: realqmmm/pt-download:latest
        container_name: pt-app
        ports:
          - "3000:3000"
        volumes:
          - ./data:/data
        restart: unless-stopped
    ```

3.  **å¯åŠ¨æœåŠ¡**
    ```bash
    docker-compose up -d
    ```

4.  **è®¿é—®åº”ç”¨**
    æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`ã€‚é»˜è®¤ç«¯å£ä¸º 3000ã€‚

## ğŸ”§ ç¯å¢ƒå˜é‡

### åŸºç¡€é…ç½®

| å˜é‡å | é»˜è®¤å€¼ | æè¿° |
| ------ | ------ | ---- |
| PORT | 3000 | æœåŠ¡è¿è¡Œç«¯å£ |
| TZ | Asia/Shanghai | æ—¶åŒºè®¾ç½® |

### æ•°æ®åº“é…ç½®

ç³»ç»Ÿæ”¯æŒä¸¤ç§æ•°æ®åº“å­˜å‚¨æ–¹å¼ï¼Œ**è‡ªåŠ¨æ£€æµ‹ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ç¯å¢ƒå˜é‡**ï¼š

#### æ–¹å¼ä¸€ï¼šå†…ç½®æ•°æ®åº“ï¼ˆé»˜è®¤ï¼‰
æ•°æ®å­˜å‚¨åœ¨å®¹å™¨å†…çš„ `/data` ç›®å½•ï¼Œé€‚åˆå¿«é€Ÿéƒ¨ç½²å’Œå•æœºä½¿ç”¨ã€‚

```yaml
volumes:
  - ./data:/data
  # ä¸é…ç½® /external_db æ˜ å°„ï¼Œè‡ªåŠ¨ä½¿ç”¨å†…ç½®æ•°æ®åº“
```

æ•°æ®åº“ä½ç½®ï¼š`./data/ptdownload.db`

#### æ–¹å¼äºŒï¼šå¤–éƒ¨æ•°æ®åº“ï¼ˆæ¨èï¼‰
æ•°æ®å­˜å‚¨åœ¨ç”¨æˆ·æŒ‡å®šçš„å¤–éƒ¨è·¯å¾„ï¼Œ**ä¾¿äºæ•°æ®è¿ç§»ï¼Œæ— éœ€å¤‡ä»½å¯¼å…¥**ã€‚

```yaml
volumes:
  - ./data:/data
  - /your/path:/external_db  # æ·»åŠ è¿™ä¸€è¡Œï¼Œç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨å¤–éƒ¨æ•°æ®åº“
```

æ•°æ®åº“ä½ç½®ï¼š`/your/path/ptdownload.db`

**ä½¿ç”¨å¤–éƒ¨æ•°æ®åº“çš„ä¼˜åŠ¿ï¼š**
- âœ… è¿ç§»é•œåƒæ—¶æ— éœ€å¤‡ä»½å’Œå¯¼å…¥è®¾ç½®
- âœ… æ•°æ®ä¸å®¹å™¨åˆ†ç¦»ï¼Œæ›´å®‰å…¨å¯é 
- âœ… æ”¯æŒ NAS ç­‰ç½‘ç»œå­˜å‚¨
- âœ… ä¾¿äºå¤šç¯å¢ƒéƒ¨ç½²
- âœ… åªéœ€é…ç½® volume æ˜ å°„ï¼Œç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹

**NAS é…ç½®ç¤ºä¾‹ï¼š**
```yaml
volumes:
  - ./data:/data
  - /share/Container/PTdownload:/external_db  # ç¾¤æ™– NAS
```

> **ğŸ’¡ å›¾å½¢åŒ–ç•Œé¢æç¤ºï¼š**
> å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Synology Container Managerã€Unraid æˆ– Portainer ç­‰å›¾å½¢åŒ–ç®¡ç†ç•Œé¢ï¼Œç³»ç»Ÿé•œåƒå·²å†…ç½®è·¯å¾„å£°æ˜ã€‚åœ¨æ·»åŠ å·æ˜ å°„æ—¶ï¼Œå³ä¾§çš„å®¹å™¨å†…éƒ¨è·¯å¾„é€šå¸¸ä¼šè‡ªåŠ¨å¯é€‰æˆ–æ˜¾ç¤ºä¸º `/data` å’Œ `/external_db`ï¼Œæ‚¨åªéœ€å¡«å…¥å·¦ä¾§çš„å®¿ä¸»æœºè·¯å¾„å³å¯ã€‚

ğŸ“– **è¯¦ç»†é…ç½®æŒ‡å—**ï¼š
- [è¶…ç®€å•é…ç½®æŒ‡å—](docs/database-simple-guide.md) - **æ¨èæ–°æ‰‹é˜…è¯»**
- [æ•°æ®åº“å¤–éƒ¨æŒ‚è½½ä½¿ç”¨æŒ‡å—](docs/database-external-mount.md)

ğŸ’¡ **å·²æœ‰æ•°æ®éœ€è¦è¿ç§»ï¼Ÿ**
1. åœ¨ UI ä¸­å¯¼å‡ºæ•°æ®åº“ï¼š**è®¾ç½®** â†’ **ç³»ç»Ÿè®¾ç½®** â†’ **å¤‡ä»½ä¸æ¢å¤** â†’ **å¯¼å‡ºæ•°æ®åº“æ–‡ä»¶**
2. å°†å¯¼å‡ºçš„æ–‡ä»¶å¤åˆ¶åˆ°å¤–éƒ¨è·¯å¾„
3. åœ¨ docker-compose.yml ä¸­æ·»åŠ  volume æ˜ å°„
4. é‡å¯å®¹å™¨

æˆ–ä½¿ç”¨è‡ªåŠ¨åŒ–è¿ç§»è„šæœ¬ï¼š
```bash
./migrate-to-external-db.sh /path/to/your/external/database
```
æˆ–æŸ¥çœ‹ [è¯¦ç»†è¿ç§»æŒ‡å—](docs/migrate-to-external-db.md)

## ğŸ“¦ ç›®å½•ç»“æ„
```
PTDownload/
â”œâ”€â”€ client/                 # å‰ç«¯ä»£ç  (React)
â”œâ”€â”€ server/                 # åç«¯ä»£ç  (Node.js)
â”œâ”€â”€ data/                   # æ•°æ®åº“æŒä¹…åŒ–ç›®å½•
â”œâ”€â”€ Dockerfile              # å¤šé˜¶æ®µé•œåƒæ„å»ºé…ç½®
â””â”€â”€ docker-compose.yml      # å®¹å™¨ç¼–æ’é…ç½®
```

## ğŸ¤ è´¡çŒ®
å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿æäº¤ Issue æˆ– Pull Requestã€‚

## ğŸ“„ è®¸å¯è¯
[MIT License](LICENSE)
